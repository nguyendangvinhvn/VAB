<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Birthday Celebration</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        * {
            font-family: 'Quicksand', sans-serif;
        }
        
        html, body {
            height: 100%;
            overflow-x: hidden;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        #app-wrapper {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        #birthday-screen {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        @keyframes confetti {
            0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(236, 72, 153, 0.4), 0 0 40px rgba(236, 72, 153, 0.2); }
            50% { box-shadow: 0 0 30px rgba(236, 72, 153, 0.6), 0 0 60px rgba(236, 72, 153, 0.4); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
        }
        
        @keyframes slideInFromLeft {
            0% { transform: translateX(-100%) rotate(-10deg); opacity: 0; }
            100% { transform: translateX(0) rotate(0deg); opacity: 1; }
        }
        
        @keyframes slideInFromRight {
            0% { transform: translateX(100%) rotate(10deg); opacity: 0; }
            100% { transform: translateX(0) rotate(0deg); opacity: 1; }
        }
        
        @keyframes slideInFromTop {
            0% { transform: translateY(-100%) scale(0.8); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        @keyframes slideInFromBottom {
            0% { transform: translateY(100%) scale(0.8); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(-90deg); opacity: 0.8; }
            70% { transform: scale(0.9) rotate(-45deg); opacity: 0.9; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        @keyframes textGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 105, 180, 0.5), 0 0 20px rgba(255, 105, 180, 0.3), 0 0 30px rgba(255, 105, 180, 0.2); }
            50% { text-shadow: 0 0 20px rgba(255, 105, 180, 0.8), 0 0 40px rgba(255, 105, 180, 0.6), 0 0 60px rgba(255, 105, 180, 0.4); }
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 105, 180, 0.3), 0 0 40px rgba(255, 105, 180, 0.2); }
            50% { box-shadow: 0 0 40px rgba(255, 105, 180, 0.6), 0 0 80px rgba(255, 105, 180, 0.4); }
        }
        
        @keyframes floatingHearts {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .birthday-background {
            background: linear-gradient(-45deg, #FFF0F5, #FFE4E1, #FFC0CB, #FFB6C1);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        
        .login-background {
            background: linear-gradient(-45deg, #fdf2f8, #fce7f3, #fbcfe8, #f9a8d4);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        
        .rope-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .rope {
            position: absolute;
            top: 10px;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, 
                #8B4513 0%, #A0522D 20%, #CD853F 40%, 
                #D2691E 60%, #A0522D 80%, #8B4513 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .rope::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                rgba(139, 69, 19, 0.3) 2px,
                transparent 4px
            );
        }
        
        .photo {
            position: absolute;
            background: white;
            border: 8px solid white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .photo:hover {
            transform: scale(1.15) rotate(2deg);
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
            z-index: 20;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .photo::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 15px;
            background: #8B4513;
            z-index: -1;
        }
        
        .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* Column 1 - Far right */
        .photo-left-1 {
            top: 3%;
            right: 2%;
            width: 140px;
            height: 180px;
        }
        
        .photo-left-2 {
            top: 22%;
            right: 4%;
            width: 160px;
            height: 110px;
        }
        
        .photo-left-3 {
            top: 38%;
            right: 1%;
            width: 150px;
            height: 130px;
        }
        
        .photo-left-4 {
            top: 58%;
            right: 3%;
            width: 130px;
            height: 140px;
        }
        
        .photo-extra-1 {
            top: 80%;
            right: 2%;
            width: 140px;
            height: 100px;
        }
        
        /* Column 2 - Middle right */
        .photo-right-1 {
            top: 5%;
            right: 15%;
            width: 150px;
            height: 160px;
        }
        
        .photo-right-2 {
            top: 24%;
            right: 17%;
            width: 130px;
            height: 140px;
        }
        
        .photo-right-3 {
            top: 42%;
            right: 14%;
            width: 160px;
            height: 120px;
        }
        
        .photo-right-4 {
            top: 60%;
            right: 16%;
            width: 140px;
            height: 130px;
        }
        
        .photo-extra-2 {
            top: 82%;
            right: 15%;
            width: 150px;
            height: 90px;
        }
        
        /* Column 3 - Move further right */
        .photo-top-right {
            top: 8%;
            right: 28%;
            width: 170px;
            height: 140px;
        }
        
        .photo-extra-3 {
            top: 26%;
            right: 30%;
            width: 140px;
            height: 160px;
        }
        
        .photo-extra-4 {
            top: 46%;
            right: 27%;
            width: 160px;
            height: 120px;
        }
        
        .photo-extra-5 {
            top: 66%;
            right: 29%;
            width: 150px;
            height: 130px;
        }
        
        /* Column 4 - Move much further right */
        .photo-col4-1 {
            top: 10%;
            right: 40%;
            width: 160px;
            height: 150px;
        }
        
        .photo-col4-2 {
            top: 28%;
            right: 42%;
            width: 140px;
            height: 170px;
        }
        
        .photo-col4-3 {
            top: 50%;
            right: 39%;
            width: 170px;
            height: 130px;
        }
        
        .photo-col4-4 {
            top: 70%;
            right: 41%;
            width: 150px;
            height: 140px;
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        .shake {
            animation: shake 0.3s ease-in-out;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            animation: confetti 3s linear forwards;
        }
        
        .login-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(253, 242, 248, 0.9));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(236, 72, 153, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .pin-input {
            width: 50px;
            height: 60px;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            margin: 0 4px;
            border: 3px solid #ec4899;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 60px;
            padding: 0;
            vertical-align: middle;
            color: #1f2937;
        }
        
        .pin-input::-webkit-inner-spin-button,
        .pin-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .pin-input:focus {
            outline: none;
            transform: scale(1.15) translateY(-5px);
            box-shadow: 0 0 25px rgba(236, 72, 153, 0.6), 0 8px 20px rgba(0, 0, 0, 0.3);
            animation: glow 1.5s infinite;
        }
        
        .pin-input.filled {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            color: white;
        }
        
        .heart-icon {
            animation: heartBeat 1.5s infinite;
        }
        
        .sparkle {
            animation: sparkle 2s infinite;
        }
        
        .birthday-entrance {
            animation: slideInFromTop 1.2s ease-out forwards;
        }
        
        .slide-left {
            animation: slideInFromLeft 0.8s ease-out forwards;
        }
        
        .slide-right {
            animation: slideInFromRight 0.8s ease-out forwards;
        }
        
        .slide-top {
            animation: slideInFromTop 1s ease-out forwards;
        }
        
        .slide-bottom {
            animation: slideInFromBottom 1s ease-out forwards;
        }
        
        .text-glow {
            animation: textGlow 2s ease-in-out infinite;
        }
        
        .pulse-glow {
            animation: pulseGlow 3s ease-in-out infinite;
        }
        
        .floating-heart {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 1000;
            animation: floatingHearts 4s linear infinite;
        }
        
        .twinkle-star {
            animation: twinkle 2s ease-in-out infinite;
        }
        
        .birthday-screen-active .photo-left-1 {
            animation: slideInFromLeft 1s ease-out 0.2s both;
        }
        
        .birthday-screen-active .photo-left-2 {
            animation: slideInFromLeft 1s ease-out 0.6s both;
        }
        
        .birthday-screen-active .photo-left-3 {
            animation: slideInFromLeft 1s ease-out 1.0s both;
        }
        
        .birthday-screen-active .photo-left-4 {
            animation: slideInFromLeft 1s ease-out 1.4s both;
        }
        
        .birthday-screen-active .photo-right-1 {
            animation: slideInFromRight 1s ease-out 0.4s both;
        }
        
        .birthday-screen-active .photo-right-2 {
            animation: slideInFromRight 1s ease-out 0.8s both;
        }
        
        .birthday-screen-active .photo-right-3 {
            animation: slideInFromRight 1s ease-out 1.2s both;
        }
        
        .birthday-screen-active .photo-right-4 {
            animation: slideInFromRight 1s ease-out 1.6s both;
        }
        
        .birthday-screen-active .photo-top-right {
            animation: slideInFromTop 1s ease-out 0.3s both;
        }
        
        .birthday-screen-active .photo-extra-1 {
            animation: slideInFromRight 1s ease-out 1.8s both;
        }
        
        .birthday-screen-active .photo-extra-2 {
            animation: slideInFromRight 1s ease-out 2.0s both;
        }
        
        .birthday-screen-active .photo-extra-3 {
            animation: slideInFromRight 1s ease-out 0.9s both;
        }
        
        .birthday-screen-active .photo-extra-4 {
            animation: slideInFromRight 1s ease-out 1.3s both;
        }
        
        .birthday-screen-active .photo-extra-5 {
            animation: slideInFromRight 1s ease-out 1.7s both;
        }
        
        .birthday-screen-active .photo-col4-1 {
            animation: slideInFromRight 1s ease-out 0.5s both;
        }
        
        .birthday-screen-active .photo-col4-2 {
            animation: slideInFromRight 1s ease-out 1.1s both;
        }
        
        .birthday-screen-active .photo-col4-3 {
            animation: slideInFromRight 1s ease-out 1.5s both;
        }
        
        .birthday-screen-active .photo-col4-4 {
            animation: slideInFromRight 1s ease-out 1.9s both;
        }
        
        .birthday-screen-active .rope {
            animation: slideInFromTop 0.8s ease-out 0.1s both;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .photo {
                display: none;
            }
            
            .rope-container {
                display: none;
            }
            
            .birthday-screen {
                padding: 1rem;
            }
            
            .text-center {
                max-width: 100% !important;
            }
            
            .rounded-3xl {
                padding: 1.5rem !important;
                margin: 0 1rem !important;
            }
            
            #birthday-title {
                font-size: 2.5rem !important;
            }
            
            #birthday-message {
                font-size: 1rem !important;
            }
            
            .login-card {
                padding: 1.5rem !important;
                margin: 0 1rem;
            }
            
            .pin-input {
                width: 40px;
                height: 50px;
                font-size: 20px;
                margin: 0 2px;
            }
            
            .grid {
                gap: 0.5rem !important;
            }
            
            .num-key, #clear-btn, #delete-btn {
                padding: 0.75rem !important;
                font-size: 1.25rem !important;
            }
            
            /* Keep left layout on mobile but center if needed */
            .absolute.top-0.left-6 {
                left: 1rem !important;
            }
        }
        
        /* Mobile Landscape Mode */
        @media (max-width: 768px) and (orientation: landscape) {
            #login-screen {
                padding: 0.5rem !important;
            }
            
            .login-card {
                padding: 1rem !important;
                margin: 0 0.5rem !important;
                max-width: 90vw;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .login-card h2 {
                font-size: 1.5rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .login-card p {
                font-size: 0.875rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .pin-input {
                width: 35px !important;
                height: 45px !important;
                font-size: 18px !important;
                margin: 0 1px !important;
            }
            
            .grid {
                gap: 0.25rem !important;
                max-width: 250px !important;
                margin: 0 auto !important;
            }
            
            .num-key, #clear-btn, #delete-btn {
                padding: 0.5rem !important;
                font-size: 1rem !important;
                min-height: 40px !important;
            }
            
            #unlock-btn {
                padding: 0.5rem 1rem !important;
                font-size: 1rem !important;
                margin-top: 0.5rem !important;
            }
            
            .text-6xl {
                font-size: 2.5rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .sparkle {
                font-size: 1rem !important;
            }
            
            /* Birthday screen landscape */
            #birthday-screen .absolute.top-0.left-6 {
                position: relative !important;
                top: auto !important;
                left: auto !important;
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 1rem !important;
                gap: 2rem !important;
                height: 100vh !important;
            }
            
            #birthday-screen .float-animation {
                flex-shrink: 0;
            }
            
            #birthday-screen .float-animation svg {
                width: 200px !important;
                height: 200px !important;
            }
            
            #birthday-screen .rounded-3xl {
                padding: 1rem !important;
                margin: 0 !important;
                max-width: 400px !important;
            }
            
            #birthday-title {
                font-size: 1.5rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            #birthday-message {
                font-size: 0.875rem !important;
                margin-bottom: 0.5rem !important;
                line-height: 1.4 !important;
            }
            
            #sender-name {
                font-size: 1rem !important;
            }
            
            #music-toggle {
                padding: 0.25rem 0.5rem !important;
                font-size: 0.75rem !important;
            }
        }
        
        /* Tablet Landscape */
        @media (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {
            .login-card {
                max-width: 600px;
                margin: 0 auto;
            }
            
            #birthday-screen .absolute.top-0.left-6 {
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 3rem !important;
                padding: 2rem !important;
            }
            
            #birthday-screen .float-animation svg {
                width: 280px !important;
                height: 280px !important;
            }
            
            #birthday-screen .rounded-3xl {
                max-width: 500px !important;
            }
        }
        
        /* Birthday Message Card Styling */
        .birthday-screen .rounded-3xl {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 105, 180, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* Ensure birthday screen centers content properly */
        #birthday-screen {
            display: block !important;
        }
        
        #birthday-screen[style*="display: none"] {
            display: none !important;
        }
        
        /* Center cake and card layout */
        #birthday-screen .absolute.inset-0.flex {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        @media (max-width: 1200px) {
            /* Column 1 - Far right */
            .photo-left-1 {
                right: 1%;
                width: 110px;
                height: 140px;
            }
            
            .photo-left-2 {
                right: 2%;
                width: 130px;
                height: 90px;
            }
            
            .photo-left-3 {
                right: 0.5%;
                width: 120px;
                height: 100px;
            }
            
            .photo-left-4 {
                right: 1.5%;
                width: 100px;
                height: 110px;
            }
            
            .photo-extra-1 {
                right: 1%;
                width: 110px;
                height: 80px;
            }
            
            /* Column 2 - Middle right */
            .photo-right-1 {
                right: 12%;
                width: 120px;
                height: 130px;
            }
            
            .photo-right-2 {
                right: 13%;
                width: 100px;
                height: 110px;
            }
            
            .photo-right-3 {
                right: 11%;
                width: 130px;
                height: 95px;
            }
            
            .photo-right-4 {
                right: 12.5%;
                width: 110px;
                height: 100px;
            }
            
            .photo-extra-2 {
                right: 12%;
                width: 120px;
                height: 70px;
            }
            
            /* Column 3 - Move further right */
            .photo-top-right {
                right: 23%;
                width: 140px;
                height: 110px;
            }
            
            .photo-extra-3 {
                right: 24%;
                width: 110px;
                height: 130px;
            }
            
            .photo-extra-4 {
                right: 22%;
                width: 130px;
                height: 95px;
            }
            
            .photo-extra-5 {
                right: 23.5%;
                width: 120px;
                height: 100px;
            }
            
            /* Column 4 - Move much further right */
            .photo-col4-1 {
                right: 33%;
                width: 130px;
                height: 120px;
            }
            
            .photo-col4-2 {
                right: 34%;
                width: 110px;
                height: 140px;
            }
            
            .photo-col4-3 {
                right: 32%;
                width: 140px;
                height: 100px;
            }
            
            .photo-col4-4 {
                right: 33.5%;
                width: 120px;
                height: 110px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app-wrapper" class="h-full w-full overflow-auto">
   <!-- Birthday Music -->
   <audio id="birthday-music" loop>
    <source src="happy-birthday.mp3" type="audio/mpeg">
    <source src="happy-birthday.wav" type="audio/wav">
    <source src="happy-birthday.ogg" type="audio/ogg">
    <!-- Fallback message -->
    Your browser does not support the audio element.
   </audio>
   
   <!-- Login Screen -->
   <div id="login-screen" class="min-h-full flex items-center justify-center p-6 relative overflow-hidden login-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000;"><!-- Floating Hearts Background -->
    <div class="absolute inset-0 pointer-events-none">
     <div class="absolute top-10 left-10 text-4xl opacity-20 sparkle">
      üíï
     </div>
     <div class="absolute top-20 right-20 text-3xl opacity-15 sparkle" style="animation-delay: 0.5s;">
      üéÇ
     </div>
     <div class="absolute bottom-20 left-20 text-3xl opacity-15 sparkle" style="animation-delay: 1s;">
      üéà
     </div>
     <div class="absolute bottom-10 right-10 text-4xl opacity-20 sparkle" style="animation-delay: 1.5s;">
      üéÅ
     </div>
     <div class="absolute top-1/2 left-5 text-2xl opacity-10 sparkle" style="animation-delay: 2s;">
      ‚ú®
     </div>
     <div class="absolute top-1/3 right-5 text-2xl opacity-10 sparkle" style="animation-delay: 2.5s;">
      ‚≠ê
     </div>
    </div>
    <div class="text-center max-w-md w-full fade-in relative z-10">
     <div class="login-card rounded-3xl p-8 shadow-2xl">
      <div class="mb-6">
       <div class="text-6xl mb-4 heart-icon">
        üéÅ
       </div>
       <h2 class="text-3xl font-bold mb-2 text-gray-800" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">Sinh Nh·∫≠t</h2>
       <div class="flex items-center justify-center gap-2 mb-2">
        <span class="text-lg">üéä</span>
        <p class="text-lg text-gray-700">Nh·∫≠p m√£ 6 s·ªë</p>
        <span class="text-lg">üéä</span>
       </div>
       <p class="text-sm text-gray-600 mt-2 opacity-80">M√£ s·ªë li√™n quan ƒë·∫øn sinh nh·∫≠t b·∫°n</p>
      </div>
      <div class="flex justify-center mb-4 gap-2">
       <input type="number" maxlength="1" class="pin-input" id="pin1">
       <input type="number" maxlength="1" class="pin-input" id="pin2">
       <input type="number" maxlength="1" class="pin-input" id="pin3">
       <input type="number" maxlength="1" class="pin-input" id="pin4">
       <input type="number" maxlength="1" class="pin-input" id="pin5">
       <input type="number" maxlength="1" class="pin-input" id="pin6">
      </div>
      <div id="error-message" class="text-sm font-semibold mb-4 min-h-5 text-center"></div>
      <!-- Number Keypad -->
      <div class="grid grid-cols-3 gap-3 mb-4 max-w-xs mx-auto">
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="1">1</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="2">2</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="3">3</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="4">4</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="5">5</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="6">6</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="7">7</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="8">8</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="9">9</button>
        <button id="clear-btn" class="px-6 py-5 text-2xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg">‚ùå</button>
        <button class="num-key px-6 py-5 text-3xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg" data-num="0">0</button>
        <button id="delete-btn" class="px-6 py-5 text-2xl font-bold rounded-2xl transition-all duration-200 transform hover:scale-110 active:scale-95 shadow-lg">‚å´</button>
      </div>
      
      <button id="unlock-btn" class="px-8 py-3 rounded-full text-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-2xl shadow-xl w-full bg-gradient-to-r from-pink-400 to-pink-500 text-white hover:from-pink-500 hover:to-pink-600">
       <span class="flex items-center justify-center gap-2">
        <span>M·ªü Kh√≥a</span>
        <span class="text-xl">üîì</span>
       </span>
      </button>
      
      <div class="mt-4 flex justify-center gap-3 text-xl opacity-60">
       <span class="sparkle">üåü</span>
       <span class="sparkle" style="animation-delay: 0.3s;">üí´</span>
       <span class="sparkle" style="animation-delay: 0.6s;">‚ú®</span>
      </div>
     </div>
     </div>
    </div>
   </div><!-- Birthday Screen -->
   <div id="birthday-screen" class="h-screen w-full relative overflow-hidden" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999;">
    <!-- Floating Hearts Animation -->
    <div id="floating-hearts-container" class="fixed inset-0 pointer-events-none z-50"></div>
    
    <!-- Twinkling Stars Background -->
    <div class="absolute inset-0 pointer-events-none z-10">
      <div class="absolute top-10 left-10 text-3xl twinkle-star" style="animation-delay: 0s;">‚≠ê</div>
      <div class="absolute top-20 right-20 text-2xl twinkle-star" style="animation-delay: 0.5s;">‚ú®</div>
      <div class="absolute bottom-20 left-20 text-3xl twinkle-star" style="animation-delay: 1s;">üåü</div>
      <div class="absolute bottom-10 right-10 text-2xl twinkle-star" style="animation-delay: 1.5s;">üí´</div>
      <div class="absolute top-1/2 left-5 text-2xl twinkle-star" style="animation-delay: 2s;">‚≠ê</div>
      <div class="absolute top-1/3 right-5 text-3xl twinkle-star" style="animation-delay: 2.5s;">‚ú®</div>
      <div class="absolute top-2/3 left-1/4 text-2xl twinkle-star" style="animation-delay: 3s;">üåü</div>
      <div class="absolute bottom-1/3 right-1/4 text-2xl twinkle-star" style="animation-delay: 3.5s;">üí´</div>
    </div>
    
    <!-- Rope with Photos -->
    <div class="rope-container">
      <div class="rope"></div>
      
      <!-- Left Photos (4 photos) -->
      <div class="photo photo-left-1">
        <img src="img/IMG_2209.jpeg" alt="Memory 1">
      </div>
      
      <div class="photo photo-left-2">
        <img src="img/IMG_2209 2.jpeg" alt="Memory 2">
      </div>
      
      <div class="photo photo-left-3">
        <img src="img/IMG_2209 3.jpeg" alt="Memory 3">
      </div>
      
      <div class="photo photo-left-4">
        <img src="img/IMG_2210.jpeg" alt="Memory 4">
      </div>
      
      <!-- Right Photos (4 photos) -->
      <div class="photo photo-right-1">
        <img src="img/IMG_2216.png" alt="Memory 5">
      </div>
      
      <div class="photo photo-right-2">
        <img src="img/IMG_2217.png" alt="Memory 6">
      </div>
      
      <div class="photo photo-right-3">
        <img src="img/IMG_2218.png" alt="Memory 7">
      </div>
      
      <div class="photo photo-right-4">
        <img src="img/IMG_2219.png" alt="Memory 8">
      </div>
      
      <!-- Top Right Photo - Fill empty space -->
      <div class="photo photo-top-right">
        <img src="img/IMG_2220.png" alt="Memory 9">
      </div>
      
      <!-- Additional Photos (5 more) -->
      <div class="photo photo-extra-1">
        <img src="img/IMG_2221.png" alt="Memory 10">
      </div>
      
      <div class="photo photo-extra-2">
        <img src="img/IMG_2222.jpeg" alt="Memory 11">
      </div>
      
      <div class="photo photo-extra-3">
        <img src="img/IMG_2223.png" alt="Memory 12">
      </div>
      
      <div class="photo photo-extra-4">
        <img src="img/IMG_2224.png" alt="Memory 13">
      </div>
      
      <div class="photo photo-extra-5">
        <img src="img/IMG_2225.png" alt="Memory 14">
      </div>
      
      <!-- Column 4 - Additional Photos (4 more) -->
      <div class="photo photo-col4-1">
        <img src="img/IMG_2226.png" alt="Memory 15">
      </div>
      
      <div class="photo photo-col4-2">
        <img src="img/IMG_2227.png" alt="Memory 16">
      </div>
      
      <div class="photo photo-col4-3">
        <img src="img/IMG_2228.jpeg" alt="Memory 17">
      </div>
      
      <div class="photo photo-col4-4">
        <img src="img/IMG_2229.png" alt="Memory 18">
      </div>
    </div>
    
    <!-- Main Content Container - Left Side Layout -->
    <div class="absolute top-0 left-6 h-full flex flex-col items-center justify-center z-20">
      <!-- Birthday Cake SVG - Left side -->
      <div class="float-animation birthday-entrance">
       <svg width="320" height="320" viewbox="0 0 320 320" class="mx-auto">
        <defs>
         <lineargradient id="cakeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:#FFB6C1;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#FF69B4;stop-opacity:1" />
         </lineargradient>
         <lineargradient id="frostingGradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#FFF0F5;stop-opacity:1" />
         </lineargradient>
         <radialgradient id="flameGradient">
          <stop offset="0%" style="stop-color:#FFFF99;stop-opacity:1" />
          <stop offset="50%" style="stop-color:#FFD700;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#FF6347;stop-opacity:0.8" />
         </radialgradient>
        </defs>
        <!-- Sparkles Background --> <circle cx="50" cy="80" r="3" fill="#FFD700" opacity="0.6">
         <animate attributename="opacity" values="0.3;1;0.3" dur="2s" repeatcount="indefinite" />
        </circle> <circle cx="270" cy="100" r="2" fill="#FFD700" opacity="0.6">
         <animate attributename="opacity" values="0.3;1;0.3" dur="2.5s" repeatcount="indefinite" />
        </circle> <circle cx="80" cy="180" r="2.5" fill="#FF69B4" opacity="0.5">
         <animate attributename="opacity" values="0.3;1;0.3" dur="3s" repeatcount="indefinite" />
        </circle> <circle cx="240" cy="200" r="2" fill="#FF69B4" opacity="0.5">
         <animate attributename="opacity" values="0.3;1;0.3" dur="2.2s" repeatcount="indefinite" />
        </circle> <!-- Shadow/Plate --> <ellipse cx="160" cy="280" rx="130" ry="15" fill="#000000" opacity="0.15" /> <!-- Bottom Cake Layer --> <rect x="60" y="210" width="200" height="70" rx="10" fill="url(#cakeGradient)" /> <rect x="60" y="210" width="200" height="20" rx="10" fill="url(#frostingGradient)" /> <!-- Frosting Drips Bottom --> <path d="M 65 230 Q 75 240 85 230 Q 95 240 105 230 Q 115 240 125 230 Q 135 240 145 230 Q 155 240 165 230 Q 175 240 185 230 Q 195 240 205 230 Q 215 240 225 230 Q 235 240 245 230 Q 250 240 255 230" fill="url(#frostingGradient)" opacity="0.9" /> <!-- Decorative Border Bottom --> <circle cx="80" cy="250" r="8" fill="#FF1493" /> <circle cx="110" cy="255" r="7" fill="#FFD700" /> <circle cx="140" cy="250" r="8" fill="#FF69B4" /> <circle cx="170" cy="255" r="7" fill="#FFD700" /> <circle cx="200" cy="250" r="8" fill="#FF1493" /> <circle cx="230" cy="255" r="7" fill="#FFD700" /> <!-- Middle Cake Layer --> <rect x="80" y="150" width="160" height="65" rx="10" fill="url(#cakeGradient)" /> <rect x="80" y="150" width="160" height="18" rx="10" fill="url(#frostingGradient)" /> <!-- Frosting Drips Middle --> <path d="M 85 168 Q 95 178 105 168 Q 115 178 125 168 Q 135 178 145 168 Q 155 178 165 168 Q 175 178 185 168 Q 195 178 205 168 Q 215 178 225 168 Q 230 178 235 168" fill="url(#frostingGradient)" opacity="0.9" /> <!-- Decorative Border Middle --> <circle cx="100" cy="185" r="7" fill="#FFD700" /> <circle cx="130" cy="190" r="6" fill="#FF69B4" /> <circle cx="160" cy="185" r="7" fill="#FFD700" /> <circle cx="190" cy="190" r="6" fill="#FF69B4" /> <circle cx="220" cy="185" r="7" fill="#FFD700" /> <!-- Top Cake Layer --> <rect x="105" y="100" width="110" height="55" rx="10" fill="url(#cakeGradient)" /> <rect x="105" y="100" width="110" height="16" rx="10" fill="url(#frostingGradient)" /> <!-- Frosting Drips Top --> <path d="M 110 116 Q 120 126 130 116 Q 140 126 150 116 Q 160 126 170 116 Q 180 126 190 116 Q 200 126 210 116" fill="url(#frostingGradient)" opacity="0.9" /> <!-- Decorative Stars Top --> <polygon points="125,130 127,136 133,136 128,140 130,146 125,142 120,146 122,140 117,136 123,136" fill="#FFD700" /> <polygon points="160,135 162,141 168,141 163,145 165,151 160,147 155,151 157,145 152,141 158,141" fill="#FF69B4" /> <polygon points="195,130 197,136 203,136 198,140 200,146 195,142 190,146 192,140 187,136 193,136" fill="#FFD700" /> <!-- Candles (3 candles) --> <rect x="140" y="65" width="12" height="35" rx="3" fill="#FF69B4">
         <animate attributename="height" values="35;37;35" dur="1s" repeatcount="indefinite" />
        </rect> <rect x="154" y="60" width="12" height="40" rx="3" fill="#FFD700">
         <animate attributename="height" values="40;42;40" dur="1.2s" repeatcount="indefinite" />
        </rect> <rect x="168" y="65" width="12" height="35" rx="3" fill="#FF1493">
         <animate attributename="height" values="35;37;35" dur="0.9s" repeatcount="indefinite" />
        </rect> <!-- Flames --> <ellipse cx="146" cy="58" rx="7" ry="13" fill="url(#flameGradient)">
         <animate attributename="ry" values="13;16;13" dur="0.4s" repeatcount="indefinite" />
         <animate attributename="opacity" values="0.9;1;0.9" dur="0.4s" repeatcount="indefinite" />
        </ellipse> <ellipse cx="160" cy="53" rx="8" ry="14" fill="url(#flameGradient)">
         <animate attributename="ry" values="14;17;14" dur="0.5s" repeatcount="indefinite" />
         <animate attributename="opacity" values="0.9;1;0.9" dur="0.5s" repeatcount="indefinite" />
        </ellipse> <ellipse cx="174" cy="58" rx="7" ry="13" fill="url(#flameGradient)">
         <animate attributename="ry" values="13;16;13" dur="0.45s" repeatcount="indefinite" />
         <animate attributename="opacity" values="0.9;1;0.9" dur="0.45s" repeatcount="indefinite" />
        </ellipse> <!-- Flame Inner Glow --> <ellipse cx="146" cy="60" rx="4" ry="8" fill="#FFFF99" opacity="0.8">
         <animate attributename="ry" values="8;10;8" dur="0.4s" repeatcount="indefinite" />
        </ellipse> <ellipse cx="160" cy="55" rx="5" ry="9" fill="#FFFF99" opacity="0.8">
         <animate attributename="ry" values="9;11;9" dur="0.5s" repeatcount="indefinite" />
        </ellipse> <ellipse cx="174" cy="60" rx="4" ry="8" fill="#FFFF99" opacity="0.8">
         <animate attributename="ry" values="8;10;8" dur="0.45s" repeatcount="indefinite" />
        </ellipse>
       </svg>
      </div>
      
      <!-- Birthday Message Card - Now 40px below cake -->
      <div class="rounded-3xl p-8 shadow-2xl fade-in max-w-2xl mx-auto pulse-glow slide-bottom text-center" style="margin-top: 40px;">
       <h1 id="birthday-title" class="text-5xl font-bold mb-6 whitespace-nowrap text-glow">Ch√∫c M·ª´ng Sinh Nh·∫≠t! üéä</h1>
       <p id="birthday-message" class="text-xl mb-6 leading-relaxed slide-left">Ch√∫c b·∫°n m·ªôt ng√†y sinh nh·∫≠t th·∫≠t vui v·∫ª, h·∫°nh ph√∫c v√† tr√†n ƒë·∫ßy ni·ªÅm vui! Hy v·ªçng tu·ªïi m·ªõi s·∫Ω mang ƒë·∫øn cho b·∫°n nhi·ªÅu ƒëi·ªÅu t·ªët ƒë·∫πp, th√†nh c√¥ng v√† may m·∫Øn. H√£y lu√¥n gi·ªØ n·ª• c∆∞·ªùi r·∫°ng r·ª° v√† tinh th·∫ßn l·∫°c quan nh√©! üéà‚ú®</p>
       <p id="sender-name" class="text-lg font-semibold slide-right">üíù T·ª´: B·∫°n c·ªßa b·∫°n</p>
       
       <!-- Music Control Button -->
       <div class="mt-4">
        <button id="music-toggle" class="px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 transform hover:scale-105" style="background: rgba(255, 105, 180, 0.2); color: #FF69B4; border: 2px solid #FF69B4;">
         üéµ T·∫Øt nh·∫°c
        </button>
       </div>
      </div>
     </div>
    </div>>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            background_color: "#FFF0F5",
            card_background: "#FFFFFF",
            text_color: "#000000",
            pink_accent: "#FF69B4",
            button_color: "#FF1493",
            birthday_title: " HAPPY BIRTHDAY üéä",
            birthday_message: "Ch√∫c Vanhhh m·ªôt ng√†y sinh nh·∫≠t th·∫≠t vui v·∫ª, h·∫°nh ph√∫c v√† tr√†n ƒë·∫ßy ni·ªÅm vui! Hy v·ªçng tu·ªïi m·ªõi s·∫Ω mang ƒë·∫øn cho Vanhh nhi·ªÅu ƒëi·ªÅu t·ªët ƒë·∫πp, th√†nh c√¥ng v√† may m·∫Øn. H√£y lu√¥n gi·ªØ n·ª• c∆∞·ªùi r·∫°ng r·ª° v√† tinh th·∫ßn l·∫°c quan nh√©! üéà‚ú®",
            sender_name: "‚ú® #ndv"
        };

        const CORRECT_PIN = "231205";
        let pinInputs = [];
        
        function playBirthdayMusic() {
            const music = document.getElementById('birthday-music');
            if (music) {
                music.volume = 0.5; // Set volume to 50%
                music.play().catch(error => {
                    console.log('Could not play music:', error);
                    // Fallback: create a simple birthday tune using Web Audio API
                    playSimpleBirthdayTune();
                });
            }
        }
        
        function playSimpleBirthdayTune() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const notes = [
                    {freq: 261.63, duration: 0.5}, // C4 - Happy
                    {freq: 261.63, duration: 0.5}, // C4 - Birth-
                    {freq: 293.66, duration: 1.0}, // D4 - day
                    {freq: 261.63, duration: 1.0}, // C4 - to
                    {freq: 349.23, duration: 1.0}, // F4 - you
                    {freq: 329.63, duration: 2.0}, // E4 - (hold)
                    
                    {freq: 261.63, duration: 0.5}, // C4 - Happy
                    {freq: 261.63, duration: 0.5}, // C4 - Birth-
                    {freq: 293.66, duration: 1.0}, // D4 - day
                    {freq: 261.63, duration: 1.0}, // C4 - to
                    {freq: 392.00, duration: 1.0}, // G4 - you
                    {freq: 349.23, duration: 2.0}, // F4 - (hold)
                ];
                
                let currentTime = audioContext.currentTime;
                
                notes.forEach(note => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(note.freq, currentTime);
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0, currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.01);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + note.duration);
                    
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + note.duration);
                    
                    currentTime += note.duration;
                });
            } catch (error) {
                console.log('Could not play birthday tune:', error);
            }
        }
        
        function createConfetti() {
            const colors = ['#FF69B4', '#FF1493', '#FFC0CB', '#FFB6C1', '#FF6EB4'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }
        
        function createFloatingHearts() {
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíù', 'üíò', 'üíû', 'üíì', 'üíü'];
            const container = document.getElementById('floating-hearts-container');
            
            function addHeart() {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
                heart.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(heart);
                
                setTimeout(() => heart.remove(), 6000);
            }
            
            // T·∫°o hearts li√™n t·ª•c
            setInterval(addHeart, 800);
            
            // T·∫°o burst hearts ban ƒë·∫ßu
            for (let i = 0; i < 10; i++) {
                setTimeout(addHeart, i * 200);
            }
        }
        
        function activateBirthdayAnimations() {
            const birthdayScreen = document.getElementById('birthday-screen');
            birthdayScreen.classList.add('birthday-screen-active');
            birthdayScreen.classList.add('birthday-background');
            
            // B·∫Øt ƒë·∫ßu floating hearts
            createFloatingHearts();
            
            // Th√™m hi·ªáu ·ª©ng cho c√°c elements
            setTimeout(() => {
                const cake = birthdayScreen.querySelector('.float-animation');
                if (cake) cake.classList.add('birthday-entrance');
            }, 500);
        }
        
        function setupPinInputs() {
            pinInputs = [
                document.getElementById('pin1'),
                document.getElementById('pin2'),
                document.getElementById('pin3'),
                document.getElementById('pin4'),
                document.getElementById('pin5'),
                document.getElementById('pin6')
            ];
            
            // Disable keyboard input
            pinInputs.forEach((input) => {
                input.setAttribute('readonly', 'true');
                input.style.cursor = 'default';
            });
            
            // Setup number keypad
            const numKeys = document.querySelectorAll('.num-key');
            numKeys.forEach(key => {
                key.addEventListener('click', () => {
                    const num = key.getAttribute('data-num');
                    const emptyInput = pinInputs.find(input => !input.value);
                    
                    if (emptyInput) {
                        emptyInput.value = num;
                        emptyInput.classList.add('filled');
                        document.getElementById('error-message').textContent = '';
                    }
                });
            });
            
            // Clear button
            document.getElementById('clear-btn').addEventListener('click', () => {
                pinInputs.forEach(input => {
                    input.value = '';
                    input.classList.remove('filled');
                });
                document.getElementById('error-message').textContent = '';
            });
            
            // Delete button
            document.getElementById('delete-btn').addEventListener('click', () => {
                for (let i = pinInputs.length - 1; i >= 0; i--) {
                    if (pinInputs[i].value) {
                        pinInputs[i].value = '';
                        pinInputs[i].classList.remove('filled');
                        break;
                    }
                }
                document.getElementById('error-message').textContent = '';
            });
        }
        
        function playBirthdayMusic() {
            const music = document.getElementById('birthday-music');
            if (music) {
                music.volume = 0.5; // Set volume to 50%
                music.play().catch(error => {
                    console.log('Could not play music:', error);
                    // Fallback: create a simple birthday tune using Web Audio API
                    playSimpleBirthdayTune();
                });
            }
        }
        
        function playSimpleBirthdayTune() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const notes = [
                    {freq: 261.63, duration: 0.5}, // C4 - Happy
                    {freq: 261.63, duration: 0.5}, // C4 - Birth-
                    {freq: 293.66, duration: 1.0}, // D4 - day
                    {freq: 261.63, duration: 1.0}, // C4 - to
                    {freq: 349.23, duration: 1.0}, // F4 - you
                    {freq: 329.63, duration: 2.0}, // E4 - (hold)
                    
                    {freq: 261.63, duration: 0.5}, // C4 - Happy
                    {freq: 261.63, duration: 0.5}, // C4 - Birth-
                    {freq: 293.66, duration: 1.0}, // D4 - day
                    {freq: 261.63, duration: 1.0}, // C4 - to
                    {freq: 392.00, duration: 1.0}, // G4 - you
                    {freq: 349.23, duration: 2.0}, // F4 - (hold)
                ];
                
                let currentTime = audioContext.currentTime;
                
                notes.forEach(note => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(note.freq, currentTime);
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0, currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.01);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + note.duration);
                    
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + note.duration);
                    
                    currentTime += note.duration;
                });
            } catch (error) {
                console.log('Could not play simple tune:', error);
            }
        }
        
        function checkPin() {
            const enteredPin = pinInputs.map(input => input.value).join('');
            const errorMsg = document.getElementById('error-message');
            
            if (enteredPin.length !== 6) {
                errorMsg.textContent = 'Vui l√≤ng nh·∫≠p ƒë·ªß 6 s·ªë';
                errorMsg.style.color = '#ef4444';
                return;
            }
            
            if (enteredPin === CORRECT_PIN) {
                createConfetti();
                // Play Happy Birthday music file
                const music = document.getElementById('birthday-music');
                if (music) {
                    music.volume = 0.6;
                    music.play().then(() => {
                        console.log('Playing Happy Birthday music');
                    }).catch(error => {
                        console.log('Could not play music file, using fallback:', error);
                        playSimpleBirthdayTune();
                    });
                } else {
                    playSimpleBirthdayTune();
                }
                setTimeout(() => {
                    document.getElementById('login-screen').style.display = 'none';
                    const birthdayScreen = document.getElementById('birthday-screen');
                    birthdayScreen.style.display = 'block';
                    // K√≠ch ho·∫°t t·∫•t c·∫£ hi·ªáu ·ª©ng birthday
                    activateBirthdayAnimations();
                }, 300);
            } else {
                errorMsg.textContent = 'ÔøΩÔøΩÔøΩ M√£ kh√¥ng ƒë√∫ng, th·ª≠ l·∫°i nh√©!';
                errorMsg.style.color = '#ef4444';
                pinInputs.forEach(input => {
                    input.classList.add('shake');
                    input.value = '';
                });
                setTimeout(() => {
                    pinInputs.forEach(input => input.classList.remove('shake'));
                }, 300);
                pinInputs[0].focus();
            }
        }
        
        function applyConfig(config) {
            const appWrapper = document.getElementById('app-wrapper');
            const loginScreen = document.getElementById('login-screen');
            const birthdayScreen = document.getElementById('birthday-screen');
            const unlockBtn = document.getElementById('unlock-btn');
            const card = birthdayScreen.querySelector('.rounded-3xl');
            
            // Apply colors
            appWrapper.style.backgroundColor = config.background_color || defaultConfig.background_color;
            loginScreen.style.backgroundColor = config.background_color || defaultConfig.background_color;
            loginScreen.style.color = config.card_background || defaultConfig.card_background;
            
            birthdayScreen.style.backgroundColor = config.background_color || defaultConfig.background_color;
            card.style.backgroundColor = config.card_background || defaultConfig.card_background;
            card.style.color = config.text_color || defaultConfig.text_color;
            
            unlockBtn.style.backgroundColor = config.button_color || defaultConfig.button_color;
            unlockBtn.style.color = config.card_background || defaultConfig.card_background;
            
            pinInputs.forEach(input => {
                input.style.borderColor = config.pink_accent || defaultConfig.pink_accent;
                input.style.color = config.text_color || defaultConfig.text_color;
                input.style.backgroundColor = config.card_background || defaultConfig.card_background;
            });
            
            // Apply colors to keypad buttons
            const numKeys = document.querySelectorAll('.num-key');
            numKeys.forEach(key => {
                key.style.backgroundColor = '#ffffff';
                key.style.color = '#1f2937';
                key.style.border = '2px solid #ec4899';
            });
            
            const clearBtn = document.getElementById('clear-btn');
            const deleteBtn = document.getElementById('delete-btn');
            if (clearBtn) {
                clearBtn.style.backgroundColor = 'rgba(236, 72, 153, 0.1)';
                clearBtn.style.color = '#ec4899';
                clearBtn.style.border = '2px solid #ec4899';
            }
            if (deleteBtn) {
                deleteBtn.style.backgroundColor = 'rgba(236, 72, 153, 0.1)';
                deleteBtn.style.color = '#ec4899';
                deleteBtn.style.border = '2px solid #ec4899';
            }
            
            // Apply text content
            document.getElementById('birthday-title').textContent = config.birthday_title || defaultConfig.birthday_title;
            document.getElementById('birthday-message').textContent = config.birthday_message || defaultConfig.birthday_message;
            document.getElementById('sender-name').textContent = config.sender_name || defaultConfig.sender_name;
        }

        async function onConfigChange(config) {
            applyConfig(config);
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            config.background_color = value;
                            window.elementSdk.setConfig({ background_color: value });
                        }
                    },
                    {
                        get: () => config.card_background || defaultConfig.card_background,
                        set: (value) => {
                            config.card_background = value;
                            window.elementSdk.setConfig({ card_background: value });
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            window.elementSdk.setConfig({ text_color: value });
                        }
                    },
                    {
                        get: () => config.pink_accent || defaultConfig.pink_accent,
                        set: (value) => {
                            config.pink_accent = value;
                            window.elementSdk.setConfig({ pink_accent: value });
                        }
                    },
                    {
                        get: () => config.button_color || defaultConfig.button_color,
                        set: (value) => {
                            config.button_color = value;
                            window.elementSdk.setConfig({ button_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["birthday_title", config.birthday_title || defaultConfig.birthday_title],
                ["birthday_message", config.birthday_message || defaultConfig.birthday_message],
                ["sender_name", config.sender_name || defaultConfig.sender_name]
            ]);
        }
        
        function playSimpleBirthdayTune() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const notes = [
                    {freq: 261.63, duration: 0.5}, // C4 - Happy
                    {freq: 261.63, duration: 0.5}, // C4 - Birth-
                    {freq: 293.66, duration: 1.0}, // D4 - day
                    {freq: 261.63, duration: 1.0}, // C4 - to
                    {freq: 349.23, duration: 1.0}, // F4 - you
                    {freq: 329.63, duration: 2.0}, // E4 - (hold)
                ];
                
                let currentTime = audioContext.currentTime;
                
                notes.forEach(note => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(note.freq, currentTime);
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0, currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.01);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + note.duration);
                    
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + note.duration);
                    
                    currentTime += note.duration;
                });
            } catch (error) {
                console.log('Could not play birthday tune:', error);
            }
        }

        // Initialize
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }

        applyConfig(window.elementSdk?.config || defaultConfig);
        setupPinInputs();
        
        document.getElementById('unlock-btn').addEventListener('click', checkPin);
        
        // Music toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const musicToggle = document.getElementById('music-toggle');
            const music = document.getElementById('birthday-music');
            let isPlaying = false;
            
            if (musicToggle) {
                musicToggle.addEventListener('click', function() {
                    if (isPlaying) {
                        music.pause();
                        musicToggle.textContent = 'üéµ B·∫≠t nh·∫°c';
                        isPlaying = false;
                    } else {
                        music.play().then(() => {
                            musicToggle.textContent = 'üéµ T·∫Øt nh·∫°c';
                            isPlaying = true;
                        }).catch(error => {
                            console.log('Could not play music:', error);
                            playSimpleBirthdayTune();
                            musicToggle.textContent = 'üéµ T·∫Øt nh·∫°c';
                            isPlaying = true;
                        });
                    }
                });
            }
            
            // Set initial state when music starts
            if (music) {
                music.addEventListener('play', function() {
                    isPlaying = true;
                    if (musicToggle) {
                        musicToggle.textContent = 'üéµ T·∫Øt nh·∫°c';
                    }
                });
                
                music.addEventListener('pause', function() {
                    isPlaying = false;
                    if (musicToggle) {
                        musicToggle.textContent = 'üéµ B·∫≠t nh·∫°c';
                    }
                });
            }
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b268b4066b455de',t:'MTc2NjQ3OTExOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>